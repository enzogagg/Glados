"use strict";(globalThis.webpackChunkglados_documentation=globalThis.webpackChunkglados_documentation||[]).push([[720],{7103(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>r,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"Bytecode","title":"Bytecode Specification","description":"---","source":"@site/docs/Bytecode.md","sourceDirName":".","slug":"/Bytecode","permalink":"/Glados/Bytecode","draft":false,"unlisted":false,"editUrl":"https://github.com/enzogagg/Glados/tree/main/documentation/docs/Bytecode.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"id":"Bytecode","title":"Bytecode Specification","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Structure du code","permalink":"/Glados/Struct"}}');var d=s(4848),i=s(8453);const r={id:"Bytecode",title:"Bytecode Specification",sidebar_position:7},l="CLaD Bytecode Specification v1.0",c={},h=[{value:"1. Architecture g\xe9n\xe9rale",id:"1-architecture-g\xe9n\xe9rale",level:2},{value:"1.1 Structure du fichier bytecode",id:"11-structure-du-fichier-bytecode",level:3},{value:"1.2 Architecture de la machine virtuelle",id:"12-architecture-de-la-machine-virtuelle",level:3},{value:"2. Syst\xe8me de typage",id:"2-syst\xe8me-de-typage",level:2},{value:"2.1 Tags de types",id:"21-tags-de-types",level:3},{value:"2.2 Format des valeurs",id:"22-format-des-valeurs",level:3},{value:"2.3 Exemples d&#39;encodage",id:"23-exemples-dencodage",level:3},{value:"3. Jeu d&#39;instructions",id:"3-jeu-dinstructions",level:2},{value:"3.1 Gestion des valeurs",id:"31-gestion-des-valeurs",level:3},{value:"3.2 Op\xe9rations arithm\xe9tiques",id:"32-op\xe9rations-arithm\xe9tiques",level:3},{value:"3.3 Op\xe9rations de comparaison",id:"33-op\xe9rations-de-comparaison",level:3},{value:"3.4 Op\xe9rations sur les listes",id:"34-op\xe9rations-sur-les-listes",level:3},{value:"3.5 Symboles et \xe9valuation",id:"35-symboles-et-\xe9valuation",level:3},{value:"3.6 Gestion des variables",id:"36-gestion-des-variables",level:3},{value:"3.7 Contr\xf4le de flux",id:"37-contr\xf4le-de-flux",level:3},{value:"3.8 Gestion des fonctions",id:"38-gestion-des-fonctions",level:3},{value:"3.9 Entr\xe9es/Sorties",id:"39-entr\xe9essorties",level:3},{value:"3.10 Structures de donn\xe9es complexes",id:"310-structures-de-donn\xe9es-complexes",level:3},{value:"3.11 Terminaison",id:"311-terminaison",level:3},{value:"4. Caract\xe9ristiques de la VM",id:"4-caract\xe9ristiques-de-la-vm",level:2},{value:"4.1 Architecture \xe0 pile",id:"41-architecture-\xe0-pile",level:3},{value:"4.2 Support multi-paradigmes",id:"42-support-multi-paradigmes",level:3},{value:"4.3 Gestion des types",id:"43-gestion-des-types",level:3},{value:"5. Exemple d&#39;ex\xe9cution",id:"5-exemple-dex\xe9cution",level:2},{value:"5.1 Code source CLaD",id:"51-code-source-clad",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"clad-bytecode-specification-v10",children:"CLaD Bytecode Specification v1.0"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"1-architecture-g\xe9n\xe9rale",children:"1. Architecture g\xe9n\xe9rale"}),"\n",(0,d.jsx)(n.h3,{id:"11-structure-du-fichier-bytecode",children:"1.1 Structure du fichier bytecode"}),"\n",(0,d.jsxs)(n.p,{children:["Le fichier ",(0,d.jsx)(n.code,{children:".cbc"})," (CLaD ByteCode) est structur\xe9 en quatre sections principales :"]}),"\n",(0,d.jsx)(n.p,{children:"[ HEADER ] [ CONSTANT POOL ] [ FUNCTION TABLE ] [ INSTRUCTIONS ]"}),"\n",(0,d.jsx)(n.h3,{id:"12-architecture-de-la-machine-virtuelle",children:"1.2 Architecture de la machine virtuelle"}),"\n",(0,d.jsx)(n.p,{children:"La machine virtuelle CLaD repose sur une architecture \xe0 pile avec les composants suivants :"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Stack"})," : Pile principale pour l'\xe9valuation des expressions"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Heap"})," : Gestion des structures dynamiques (listes, cha\xeenes, objets)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Global Table"})," : Table des variables globales"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Call Stack"})," : Pile d'ex\xe9cution pour la gestion des appels de fonctions"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Cette architecture s'inspire des machines virtuelles modernes (JVM, BEAM) tout en restant adapt\xe9e aux besoins du langage CLaD."}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"2-syst\xe8me-de-typage",children:"2. Syst\xe8me de typage"}),"\n",(0,d.jsx)(n.h3,{id:"21-tags-de-types",children:"2.1 Tags de types"}),"\n",(0,d.jsx)(n.p,{children:"Le bytecode utilise un syst\xe8me de typage unifi\xe9 bas\xe9 sur des tags d'un octet :"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Tag (1 octet)"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"00"}),(0,d.jsx)(n.td,{children:"Int"}),(0,d.jsx)(n.td,{children:"Entier sign\xe9"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"01"}),(0,d.jsx)(n.td,{children:"Float"}),(0,d.jsx)(n.td,{children:"Nombre \xe0 virgule flottante"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"02"}),(0,d.jsx)(n.td,{children:"Bool"}),(0,d.jsx)(n.td,{children:"Bool\xe9en"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"03"}),(0,d.jsx)(n.td,{children:"Char"}),(0,d.jsx)(n.td,{children:"Caract\xe8re"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"04"}),(0,d.jsx)(n.td,{children:"String"}),(0,d.jsx)(n.td,{children:"Cha\xeene de caract\xe8res"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"05"}),(0,d.jsx)(n.td,{children:"List"}),(0,d.jsx)(n.td,{children:"Liste"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"06"}),(0,d.jsx)(n.td,{children:"Symbol"}),(0,d.jsx)(n.td,{children:"Symbole"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"07"}),(0,d.jsx)(n.td,{children:"Nil"}),(0,d.jsx)(n.td,{children:"Valeur nulle"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"08"}),(0,d.jsx)(n.td,{children:"Function"}),(0,d.jsx)(n.td,{children:"R\xe9f\xe9rence vers Function Table"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"09"}),(0,d.jsx)(n.td,{children:"Tuple"}),(0,d.jsx)(n.td,{children:"Tuple (liste fixe)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"0A"}),(0,d.jsx)(n.td,{children:"Array"}),(0,d.jsx)(n.td,{children:"Tableau (vecteur)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"0B"}),(0,d.jsx)(n.td,{children:"Struct"}),(0,d.jsx)(n.td,{children:"Structure (champs nomm\xe9s)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"0C"}),(0,d.jsx)(n.td,{children:"Map"}),(0,d.jsx)(n.td,{children:"Dictionnaire (Cl\xe9-Valeur)"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"22-format-des-valeurs",children:"2.2 Format des valeurs"}),"\n",(0,d.jsx)(n.p,{children:"Chaque valeur sur la pile respecte le format suivant :"}),"\n",(0,d.jsx)(n.p,{children:"[ TYPE_TAG ][ DATA... ]"}),"\n",(0,d.jsx)(n.h3,{id:"23-exemples-dencodage",children:"2.3 Exemples d'encodage"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Note sur les flottants"})," : Ils suivent la norme ",(0,d.jsx)(n.strong,{children:"IEEE-754 simple pr\xe9cision (32 bits)"}),", format Big Endian."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"00 00 00 00 2A     = Int 42\n01 40 28 00 00     = Float 2.5  (0x40280000)\n01 41 28 00 00     = Float 10.5 (0x41280000)\n02 01              = Bool true\n04 00 00 00 05 'H' 'e' 'l' 'l' 'o'  = String \"Hello\"\n06 00 00 00 03 'f' 'o' 'o'          = Symbol 'foo'\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"3-jeu-dinstructions",children:"3. Jeu d'instructions"}),"\n",(0,d.jsx)(n.h3,{id:"31-gestion-des-valeurs",children:"3.1 Gestion des valeurs"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Opcode"}),(0,d.jsx)(n.th,{children:"Instruction"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"01"}),(0,d.jsx)(n.td,{children:"PUSH_CONST index"}),(0,d.jsx)(n.td,{children:"Pousse une constante (String, List, etc.)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"02"}),(0,d.jsx)(n.td,{children:"PUSH_INT value"}),(0,d.jsx)(n.td,{children:"Pousse un entier imm\xe9diat (4 bytes)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"03"}),(0,d.jsx)(n.td,{children:"PUSH_FLOAT value"}),(0,d.jsx)(n.td,{children:"Pousse un flottant imm\xe9diat (4 bytes)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"04"}),(0,d.jsx)(n.td,{children:"PUSH_BOOL value"}),(0,d.jsx)(n.td,{children:"Pousse un bool\xe9en imm\xe9diat (1 byte)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"05"}),(0,d.jsx)(n.td,{children:"PUSH_NIL"}),(0,d.jsx)(n.td,{children:"Pousse la valeur nulle sur la pile"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"06"}),(0,d.jsx)(n.td,{children:"POP"}),(0,d.jsx)(n.td,{children:"Retire la valeur au sommet de la pile"})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Note importante"})," : Les types complexes (Strings, Symboles, Listes) doivent \xeatre stock\xe9s dans le Constant Pool et charg\xe9s via ",(0,d.jsx)(n.code,{children:"PUSH_CONST"}),". Les types imm\xe9diats (Int, Float, Bool) peuvent \xeatre encod\xe9s directement dans l'instruction."]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"32-op\xe9rations-arithm\xe9tiques",children:"3.2 Op\xe9rations arithm\xe9tiques"}),"\n",(0,d.jsx)(n.p,{children:"Les op\xe9rations arithm\xe9tiques supportent automatiquement les types Int et Float avec conversion implicite."}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Opcode"}),(0,d.jsx)(n.th,{children:"Instruction"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"10"}),(0,d.jsx)(n.td,{children:"ADD"}),(0,d.jsx)(n.td,{children:"Addition"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"11"}),(0,d.jsx)(n.td,{children:"SUB"}),(0,d.jsx)(n.td,{children:"Soustraction"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"12"}),(0,d.jsx)(n.td,{children:"MUL"}),(0,d.jsx)(n.td,{children:"Multiplication"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"13"}),(0,d.jsx)(n.td,{children:"DIV"}),(0,d.jsx)(n.td,{children:"Division"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"14"}),(0,d.jsx)(n.td,{children:"MOD"}),(0,d.jsx)(n.td,{children:"Modulo"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"15"}),(0,d.jsx)(n.td,{children:"NEG"}),(0,d.jsx)(n.td,{children:"N\xe9gation"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"33-op\xe9rations-de-comparaison",children:"3.3 Op\xe9rations de comparaison"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Opcode"}),(0,d.jsx)(n.th,{children:"Instruction"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"20"}),(0,d.jsx)(n.td,{children:"EQ"}),(0,d.jsx)(n.td,{children:"\xc9galit\xe9"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"21"}),(0,d.jsx)(n.td,{children:"NEQ"}),(0,d.jsx)(n.td,{children:"In\xe9galit\xe9"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"22"}),(0,d.jsx)(n.td,{children:"LT"}),(0,d.jsx)(n.td,{children:"Inf\xe9rieur strict"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"23"}),(0,d.jsx)(n.td,{children:"GT"}),(0,d.jsx)(n.td,{children:"Sup\xe9rieur strict"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"24"}),(0,d.jsx)(n.td,{children:"LTE"}),(0,d.jsx)(n.td,{children:"Inf\xe9rieur ou \xe9gal"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"25"}),(0,d.jsx)(n.td,{children:"GTE"}),(0,d.jsx)(n.td,{children:"Sup\xe9rieur ou \xe9gal"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"34-op\xe9rations-sur-les-listes",children:"3.4 Op\xe9rations sur les listes"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Opcode"}),(0,d.jsx)(n.th,{children:"Instruction"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"30"}),(0,d.jsx)(n.td,{children:"CONS"}),(0,d.jsx)(n.td,{children:"Construction d'une paire (cons cell)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"31"}),(0,d.jsx)(n.td,{children:"HEAD (CAR)"}),(0,d.jsx)(n.td,{children:"Extraction de la t\xeate d'une liste"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"32"}),(0,d.jsx)(n.td,{children:"TAIL (CDR)"}),(0,d.jsx)(n.td,{children:"Extraction de la queue d'une liste"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"33"}),(0,d.jsx)(n.td,{children:"LIST size"}),(0,d.jsx)(n.td,{children:"Cr\xe9e une liste de n \xe9l\xe9ments depuis la pile"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"34"}),(0,d.jsx)(n.td,{children:"LEN"}),(0,d.jsx)(n.td,{children:"Retourne la longueur d'une liste"})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Exemple"})," : ",(0,d.jsx)(n.code,{children:"LIST 3"})," consomme les 3 valeurs au sommet de la pile pour cr\xe9er ",(0,d.jsx)(n.code,{children:"[a, b, c]"}),"."]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"35-symboles-et-\xe9valuation",children:"3.5 Symboles et \xe9valuation"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Opcode"}),(0,d.jsx)(n.th,{children:"Instruction"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"40"}),(0,d.jsx)(n.td,{children:"MAKE_SYMBOL"}),(0,d.jsx)(n.td,{children:"Cr\xe9e un symbole"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"41"}),(0,d.jsx)(n.td,{children:"QUOTE"}),(0,d.jsx)(n.td,{children:"Quote une expression"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"42"}),(0,d.jsx)(n.td,{children:"EVAL"}),(0,d.jsx)(n.td,{children:"\xc9value une expression quot\xe9e"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"Ces instructions permettent de supporter les m\xe9canismes d'\xe9valuation diff\xe9r\xe9e propres aux langages de type Lisp."}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"36-gestion-des-variables",children:"3.6 Gestion des variables"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Opcode"}),(0,d.jsx)(n.th,{children:"Instruction"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"50"}),(0,d.jsx)(n.td,{children:"LOAD nameIndex"}),(0,d.jsx)(n.td,{children:"Charge la valeur d'une variable"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"51"}),(0,d.jsx)(n.td,{children:"STORE nameIndex"}),(0,d.jsx)(n.td,{children:"Stocke une valeur dans une variable"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"52"}),(0,d.jsx)(n.td,{children:"DEFINE nameIndex"}),(0,d.jsx)(n.td,{children:"D\xe9finit une nouvelle variable"})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Note"})," : Les identifiants de variables sont stock\xe9s dans le constant pool. L'index r\xe9f\xe9rence la position dans ce pool."]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"37-contr\xf4le-de-flux",children:"3.7 Contr\xf4le de flux"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Opcode"}),(0,d.jsx)(n.th,{children:"Instruction"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"60"}),(0,d.jsx)(n.td,{children:"JMP address"}),(0,d.jsx)(n.td,{children:"Saut inconditionnel \xe0 l'adresse sp\xe9cifi\xe9e"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"61"}),(0,d.jsx)(n.td,{children:"JMP_IF_TRUE address"}),(0,d.jsx)(n.td,{children:"Saut conditionnel si la valeur au sommet est vraie"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"62"}),(0,d.jsx)(n.td,{children:"JMP_IF_FALSE address"}),(0,d.jsx)(n.td,{children:"Saut conditionnel si la valeur au sommet est fausse"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"38-gestion-des-fonctions",children:"3.8 Gestion des fonctions"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Opcode"}),(0,d.jsx)(n.th,{children:"Instruction"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"70"}),(0,d.jsx)(n.td,{children:"CALL funcIndex argCount"}),(0,d.jsx)(n.td,{children:"Appel de fonction avec n arguments"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"71"}),(0,d.jsx)(n.td,{children:"RETURN"}),(0,d.jsx)(n.td,{children:"Retour de fonction"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"72"}),(0,d.jsx)(n.td,{children:"CLOSURE funcIndex"}),(0,d.jsx)(n.td,{children:"Cr\xe9ation d'une closure"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"73"}),(0,d.jsx)(n.td,{children:"LOAD_ARG index"}),(0,d.jsx)(n.td,{children:"Charge un argument de fonction"})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Function Table"})," : Une table associe chaque index de fonction \xe0 son adresse dans le bytecode :"]}),"\n",(0,d.jsx)(n.p,{children:"Function 0 \u2192 adresse 200 Function 1 \u2192 adresse 350"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"39-entr\xe9essorties",children:"3.9 Entr\xe9es/Sorties"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Opcode"}),(0,d.jsx)(n.th,{children:"Instruction"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"80"}),(0,d.jsx)(n.td,{children:"PRINT"}),(0,d.jsx)(n.td,{children:"Affiche la valeur au sommet"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"81"}),(0,d.jsx)(n.td,{children:"INPUT"}),(0,d.jsx)(n.td,{children:"Lit une entr\xe9e utilisateur"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"310-structures-de-donn\xe9es-complexes",children:"3.10 Structures de donn\xe9es complexes"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Opcode"}),(0,d.jsx)(n.th,{children:"Instruction"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"90"}),(0,d.jsx)(n.td,{children:"MAKE_TUPLE size"}),(0,d.jsx)(n.td,{children:"Cr\xe9e un tuple de n \xe9l\xe9ments depuis la pile"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"91"}),(0,d.jsx)(n.td,{children:"TUPLE_GET index"}),(0,d.jsx)(n.td,{children:"Acc\xe8de \xe0 l'\xe9l\xe9ment \xe0 l'index imm\xe9diat"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"92"}),(0,d.jsx)(n.td,{children:"MAKE_ARRAY size"}),(0,d.jsx)(n.td,{children:"Cr\xe9e un tableau de n \xe9l\xe9ments depuis la pile"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"93"}),(0,d.jsx)(n.td,{children:"ARRAY_GET"}),(0,d.jsx)(n.td,{children:"Acc\xe8s index\xe9 (Stack: array, index)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"94"}),(0,d.jsx)(n.td,{children:"ARRAY_SET"}),(0,d.jsx)(n.td,{children:"Modification (Stack: array, index, val)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"95"}),(0,d.jsx)(n.td,{children:"MAKE_MAP count"}),(0,d.jsx)(n.td,{children:"Cr\xe9e une map (Stack: k1, v1, k2, v2...)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"96"}),(0,d.jsx)(n.td,{children:"MAP_GET"}),(0,d.jsx)(n.td,{children:"Acc\xe8s par cl\xe9 (Stack: map, key)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"97"}),(0,d.jsx)(n.td,{children:"MAP_SET"}),(0,d.jsx)(n.td,{children:"Ajout/Modif (Stack: map, key, val)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"98"}),(0,d.jsx)(n.td,{children:"MAKE_STRUCT count"}),(0,d.jsx)(n.td,{children:"Cr\xe9e une struct de n champs (Stack: val1, ...)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"99"}),(0,d.jsx)(n.td,{children:"STRUCT_GET nameId"}),(0,d.jsx)(n.td,{children:"Acc\xe8s champ par nom (arg: index string pool)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"9A"}),(0,d.jsx)(n.td,{children:"STRUCT_SET nameId"}),(0,d.jsx)(n.td,{children:"Modif champ par nom (arg: index string pool)"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"311-terminaison",children:"3.11 Terminaison"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Opcode"}),(0,d.jsx)(n.th,{children:"Instruction"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"FF"}),(0,d.jsx)(n.td,{children:"HALT"}),(0,d.jsx)(n.td,{children:"Arr\xeate l'ex\xe9cution de la VM"})]})})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"4-caract\xe9ristiques-de-la-vm",children:"4. Caract\xe9ristiques de la VM"}),"\n",(0,d.jsx)(n.h3,{id:"41-architecture-\xe0-pile",children:"4.1 Architecture \xe0 pile"}),"\n",(0,d.jsx)(n.p,{children:"L'architecture \xe0 pile offre plusieurs avantages :"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Simplicit\xe9 de conception et d'impl\xe9mentation"}),"\n",(0,d.jsx)(n.li,{children:"Instructions ind\xe9pendantes et modulaires"}),"\n",(0,d.jsx)(n.li,{children:"Facilit\xe9 de d\xe9bogage (inspection de la pile)"}),"\n",(0,d.jsx)(n.li,{children:"Compatibilit\xe9 avec les paradigmes fonctionnels"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"42-support-multi-paradigmes",children:"4.2 Support multi-paradigmes"}),"\n",(0,d.jsx)(n.p,{children:"La VM CLaD est con\xe7ue pour supporter :"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Programmation imp\xe9rative"})," : variables, s\xe9quen\xe7age, boucles"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Programmation fonctionnelle"})," : fonctions de premi\xe8re classe, closures"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Programmation inspir\xe9e de Lisp"})," : symboles, quote/eval, manipulation de listes"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"43-gestion-des-types",children:"4.3 Gestion des types"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Conversion automatique Int \u2192 Float dans les op\xe9rations arithm\xe9tiques"}),"\n",(0,d.jsx)(n.li,{children:"Typage dynamique avec v\xe9rification \xe0 l'ex\xe9cution"}),"\n",(0,d.jsx)(n.li,{children:"Support des structures de donn\xe9es h\xe9t\xe9rog\xe8nes"}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"5-exemple-dex\xe9cution",children:"5. Exemple d'ex\xe9cution"}),"\n",(0,d.jsx)(n.h3,{id:"51-code-source-clad",children:"5.1 Code source CLaD"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-clad",children:"liste = [1, 2, 3]\nprint(head(liste) + 10)\n\n5.2 Repr\xe9sentation en bytecode assembleur\n\nPUSH_INT 1\nPUSH_INT 2\nPUSH_INT 3\nLIST 3\nSTORE \"liste\"\n\nLOAD \"liste\"\nHEAD\nPUSH_INT 10\nADD\nPRINT\nHALT\n\n5.3 Enc\xf4dage binaire\n\n02 00 00 00 01    ; PUSH_INT 1\n02 00 00 00 02    ; PUSH_INT 2\n02 00 00 00 03    ; PUSH_INT 3\n51 00 00 00 00    ; STORE 0 (\"liste\")\n\n50 00 00 00 00    ; LOAD 0 (\"liste\")\n02 00 00 00 0A    ; PUSH_INT 10\n10                ; ADD\n80                ; PRINT\nFF                ; HALT\n\n6. Format du fichier .cbc\n6.1 Vue d'ensemble de la structure\n\nPour visualiser clairement la structure du fichier .cbc, voici un diagramme Mermaid :\nExtrait de code\n\ngraph TD\n    A[Fichier .cbc] --\x3e B(HEADER);\n    A --\x3e C(CONSTANT POOL);\n    A --\x3e D(FUNCTION TABLE);\n    A --\x3e E(INSTRUCTIONS);\n\n    subgraph HEADER\n        B1(Magic Number : 4 bytes)\n        B2(Version : 2 bytes)\n        B3(Flags : 1 byte)\n        B4(Reserved : 3 bytes)\n    end\n\n    subgraph CONSTANT_POOL\n        C1(Count : 4 bytes)\n        C2[Entry 0] --\x3e C2_1(Type Tag : 1 byte);\n        C2_1 --\x3e C2_2(Length : 4 bytes);\n        C2_2 --\x3e C2_3(Data : n bytes);\n        C3[Entry 1] --\x3e C3_1(Type Tag : 1 byte);\n        C3_1 --\x3e C3_2(Length : 4 bytes);\n        C3_2 --\x3e C3_3(Data : n bytes);\n    end\n\n    subgraph FUNCTION_TABLE\n        D1(Count : 4 bytes)\n        D2[Function 0] --\x3e D2_1(Index : 4 bytes);\n        D2_1 --\x3e D2_2(Address : 4 bytes);\n        D2_2 --\x3e D2_3(ArgCount : 1 byte);\n        D3[Function 1] --\x3e D3_1(Index : 4 bytes);\n        D3_1 --\x3e D3_2(Address : 4 bytes);\n        D3_2 --\x3e D3_3(ArgCount : 1 byte);\n    end\n\n    subgraph INSTRUCTIONS\n        E1(Code Length : 4 bytes)\n        E2[Instruction 0] --\x3e E2_1(Opcode : 1 byte);\n        E2_1 --\x3e E2_2(Operands : variable);\n        E3[Instruction 1] --\x3e E3_1(Opcode : 1 byte);\n        E3_1 --\x3e E3_2(Operands : variable);\n    end\n\n6.2 Header (10 bytes)\nOffset   Taille   Champ Valeur / Description\n0x00  4  Magic Number   0x43 0x42 0x43 0x00 (\"CBC\\0\")\n0x04  2  Version  0x01 0x00 (version 1.0)\n0x06  1  Flags 0x00 (r\xe9serv\xe9 pour usage futur)\n0x07  3  Reserved 0x00 0x00 0x00 (padding)\n\nExemple en hexad\xe9cimal :\n\n43 42 43 00 | 01 00 | 00 | 00 00 00\n   Magic    | Ver.  |Flg | Reserved\n\n6.3 Constant Pool\n\nStructure :\nChamp Taille   Description\nCount 4 bytes  Nombre total d'entr\xe9es\nEntry N  variable Entr\xe9e de la pool\nType Tag 1 byte   Type de l'entr\xe9e (voir section 2.1)\nLength   4 bytes  Taille des donn\xe9es\nData  Length bytes   Donn\xe9es brutes\n\nExemples d'entr\xe9es :\n\nString \"Hello\":\n04 | 00 00 00 05 | 48 65 6C 6C 6F\nType | Length | Data\n\nSymbol 'x':\n06 | 00 00 00 01 | 78\nType | Length | Data (ASCII 'x')\n\nInt 42:\n00 | 00 00 00 04 | 00 00 00 2A\nType | Length | Data (32-bit int)\n\n6.4 Function Table\n\nStructure :\nChamp Taille   Description\nCount 4 bytes  Nombre de fonctions\nFunction Entry N  variable Entr\xe9e de la table\nIndex 4 bytes  ID de la fonction\nAddress  4 bytes  Adresse dans le bytecode\nArgCount 1 byte   Nombre d'arguments\n\nExemple :\n\nCount: 2 fonctions\n\nFunction 0: factorial (2 args, @ 0x00C8)\n00 00 00 00 | 00 00 00 C8 | 02\n   Index       Address      Args\n\nFunction 1: main (0 args, @ 0x0150)\n00 00 00 01 | 00 00 01 50 | 00\n   Index       Address      Args\n\n6.5 Instructions\n\nStructure :\nChamp Taille   Description\nCode Length 4 bytes  Taille totale du code\nInstruction N  variable S\xe9quence d'Opcode et d'Op\xe9randes\nOpcode   1 byte   Instruction\nOperands variable Arguments de l'instruction\n\nExemple d'encodage :\n\nInstruction: PUSH_INT 42\n02 | 00 00 00 2A\nOpcode | Operand (4 bytes)\n\nInstruction: ADD\n10\nOpcode (pas d'op\xe9rande)\n\nInstruction: CALL 0 with 2 args\n70 | 00 00 00 00 | 02\nOpcode | Function Index | ArgCount\n\n6.6 Exemple complet de fichier .cbc\n\nProgramme : print(42)\n\n43 42 43 00 01 00 00 00 00 00  ; HEADER (10 bytes)\n00 00 00 00                    ; CONSTANT POOL (Count: 0)\n00 00 00 00                    ; FUNCTION TABLE (Count: 0)\n00 00 00 06                    ; INSTRUCTIONS (Code Length: 6 bytes)\n02 00 00 00 2A                 ; PUSH_INT 42\n80                             ; PRINT\nFF                             ; HALT\n\nTaille totale: 28 bytes\n"})})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>r,x:()=>l});var t=s(6540);const d={},i=t.createContext(d);function r(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);