"use strict";(globalThis.webpackChunkglados_documentation=globalThis.webpackChunkglados_documentation||[]).push([[57],{2666(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>d,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"Bytecode","title":"Bytecode","description":"---","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/Bytecode.md","sourceDirName":".","slug":"/Bytecode","permalink":"/Glados/en/Bytecode","draft":false,"unlisted":false,"editUrl":"https://github.com/enzogagg/Glados/tree/main/documentation/docs/Bytecode.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Struct","permalink":"/Glados/en/Struct"}}');var s=t(4848),r=t(8453);const d={},l=void 0,c={},h=[{value:"id: Bytecode\ntitle: Bytecode Specification\nsidebar_position: 7",id:"id-bytecodetitle-bytecode-specificationsidebar_position-7",level:2},{value:"1. General Architecture",id:"1-general-architecture",level:2},{value:"1.1 Bytecode File Structure",id:"11-bytecode-file-structure",level:3},{value:"1.2 Virtual Machine Architecture",id:"12-virtual-machine-architecture",level:3},{value:"2. Type System",id:"2-type-system",level:2},{value:"2.1 Type Tags",id:"21-type-tags",level:3},{value:"2.2 Value Format",id:"22-value-format",level:3},{value:"2.3 Encoding Examples",id:"23-encoding-examples",level:3},{value:"3. Instruction Set",id:"3-instruction-set",level:2},{value:"3.1 Value Management",id:"31-value-management",level:3},{value:"3.2 Arithmetic Operations",id:"32-arithmetic-operations",level:3},{value:"3.3 Comparison Operations",id:"33-comparison-operations",level:3},{value:"3.4 List Operations",id:"34-list-operations",level:3},{value:"3.5 Symbols and Evaluation",id:"35-symbols-and-evaluation",level:3},{value:"3.6 Variable Management",id:"36-variable-management",level:3},{value:"3.7 Control Flow",id:"37-control-flow",level:3},{value:"3.8 Function Management",id:"38-function-management",level:3},{value:"3.9 Input/Output",id:"39-inputoutput",level:3},{value:"3.10 Termination",id:"310-termination",level:3},{value:"4. VM Characteristics",id:"4-vm-characteristics",level:2},{value:"4.1 Stack-Based Architecture",id:"41-stack-based-architecture",level:3},{value:"4.2 Multi-Paradigm Support",id:"42-multi-paradigm-support",level:3},{value:"4.3 Type Management",id:"43-type-management",level:3},{value:"5. Execution Example",id:"5-execution-example",level:2},{value:"5.1 CLaD Source Code",id:"51-clad-source-code",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"id-bytecodetitle-bytecode-specificationsidebar_position-7",children:"id: Bytecode\ntitle: Bytecode Specification\nsidebar_position: 7"}),"\n",(0,s.jsx)(n.h1,{id:"clad-bytecode-specification-v10",children:"CLaD Bytecode Specification v1.0"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"1-general-architecture",children:"1. General Architecture"}),"\n",(0,s.jsx)(n.h3,{id:"11-bytecode-file-structure",children:"1.1 Bytecode File Structure"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:".cbc"})," (CLaD ByteCode) file is structured into four main sections:"]}),"\n",(0,s.jsx)(n.p,{children:"[ HEADER ] [ CONSTANT POOL ] [ FUNCTION TABLE ] [ INSTRUCTIONS ]"}),"\n",(0,s.jsx)(n.h3,{id:"12-virtual-machine-architecture",children:"1.2 Virtual Machine Architecture"}),"\n",(0,s.jsx)(n.p,{children:"The CLaD virtual machine relies on a stack-based architecture with the following components:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Stack"}),": Main stack for expression evaluation."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Heap"}),": Management of dynamic structures (lists, strings, objects)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Global Table"}),": Table of global variables."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Call Stack"}),": Execution stack for managing function calls."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This architecture is inspired by modern virtual machines (JVM, BEAM) while remaining adapted to the needs of the CLaD language."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-type-system",children:"2. Type System"}),"\n",(0,s.jsx)(n.h3,{id:"21-type-tags",children:"2.1 Type Tags"}),"\n",(0,s.jsx)(n.p,{children:"The bytecode uses a unified typing system based on one-byte tags:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Tag (1 byte)"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"00"}),(0,s.jsx)(n.td,{children:"Int"}),(0,s.jsx)(n.td,{children:"Signed Integer"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"01"}),(0,s.jsx)(n.td,{children:"Float"}),(0,s.jsx)(n.td,{children:"Floating-point number"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"02"}),(0,s.jsx)(n.td,{children:"Bool"}),(0,s.jsx)(n.td,{children:"Boolean"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"03"}),(0,s.jsx)(n.td,{children:"Char"}),(0,s.jsx)(n.td,{children:"Character"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"04"}),(0,s.jsx)(n.td,{children:"String"}),(0,s.jsx)(n.td,{children:"String"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"05"}),(0,s.jsx)(n.td,{children:"List"}),(0,s.jsx)(n.td,{children:"List"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"06"}),(0,s.jsx)(n.td,{children:"Symbol"}),(0,s.jsx)(n.td,{children:"Symbol"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"07"}),(0,s.jsx)(n.td,{children:"Nil"}),(0,s.jsx)(n.td,{children:"Null value"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"08"}),(0,s.jsx)(n.td,{children:"Function/Closure"}),(0,s.jsx)(n.td,{children:"Function or closure"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"09"}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{children:"Object (future extension)"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"22-value-format",children:"2.2 Value Format"}),"\n",(0,s.jsx)(n.p,{children:"Each value on the stack respects the following format:"}),"\n",(0,s.jsx)(n.p,{children:"[ TYPE_TAG ][ DATA... ]"}),"\n",(0,s.jsx)(n.h3,{id:"23-encoding-examples",children:"2.3 Encoding Examples"}),"\n",(0,s.jsx)(n.p,{children:"00 00 00 00 2A = Int 42\n01 40 28 00 00 = Float 2.5\n02 01 = Bool true\n04 00 00 00 05 'H' 'e' 'l' 'l' 'o' = String \"Hello\"\n06 00 00 00 03 'f' 'o' 'o' = Symbol 'foo'"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-instruction-set",children:"3. Instruction Set"}),"\n",(0,s.jsx)(n.h3,{id:"31-value-management",children:"3.1 Value Management"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Opcode"}),(0,s.jsx)(n.th,{children:"Instruction"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"01"}),(0,s.jsx)(n.td,{children:"PUSH_CONST index"}),(0,s.jsx)(n.td,{children:"Pushes a constant from the pool"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"02"}),(0,s.jsx)(n.td,{children:"PUSH_INT value"}),(0,s.jsx)(n.td,{children:"Pushes an integer onto the stack"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"03"}),(0,s.jsx)(n.td,{children:"PUSH_FLOAT value"}),(0,s.jsx)(n.td,{children:"Pushes a float onto the stack"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"04"}),(0,s.jsx)(n.td,{children:"PUSH_BOOL value"}),(0,s.jsx)(n.td,{children:"Pushes a boolean onto the stack"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"05"}),(0,s.jsx)(n.td,{children:"PUSH_STRING"}),(0,s.jsx)(n.td,{children:"Pushes a string onto the stack"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"06"}),(0,s.jsx)(n.td,{children:"PUSH_NIL"}),(0,s.jsx)(n.td,{children:"Pushes the null value onto the stack"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"07"}),(0,s.jsx)(n.td,{children:"POP"}),(0,s.jsx)(n.td,{children:"Removes the value at the top of the stack"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": The constant pool allows for efficient storage of large values (strings, symbols, complex lists)."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"32-arithmetic-operations",children:"3.2 Arithmetic Operations"}),"\n",(0,s.jsx)(n.p,{children:"Arithmetic operations automatically support Int and Float types with implicit conversion."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Opcode"}),(0,s.jsx)(n.th,{children:"Instruction"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"10"}),(0,s.jsx)(n.td,{children:"ADD"}),(0,s.jsx)(n.td,{children:"Addition"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"11"}),(0,s.jsx)(n.td,{children:"SUB"}),(0,s.jsx)(n.td,{children:"Subtraction"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"12"}),(0,s.jsx)(n.td,{children:"MUL"}),(0,s.jsx)(n.td,{children:"Multiplication"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"13"}),(0,s.jsx)(n.td,{children:"DIV"}),(0,s.jsx)(n.td,{children:"Division"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"14"}),(0,s.jsx)(n.td,{children:"MOD"}),(0,s.jsx)(n.td,{children:"Modulo"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"15"}),(0,s.jsx)(n.td,{children:"NEG"}),(0,s.jsx)(n.td,{children:"Negation"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"33-comparison-operations",children:"3.3 Comparison Operations"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Opcode"}),(0,s.jsx)(n.th,{children:"Instruction"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"20"}),(0,s.jsx)(n.td,{children:"EQ"}),(0,s.jsx)(n.td,{children:"Equality"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"21"}),(0,s.jsx)(n.td,{children:"NEQ"}),(0,s.jsx)(n.td,{children:"Inequality"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"22"}),(0,s.jsx)(n.td,{children:"LT"}),(0,s.jsx)(n.td,{children:"Strictly less than"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"23"}),(0,s.jsx)(n.td,{children:"GT"}),(0,s.jsx)(n.td,{children:"Strictly greater than"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"24"}),(0,s.jsx)(n.td,{children:"LTE"}),(0,s.jsx)(n.td,{children:"Less than or equal to"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"25"}),(0,s.jsx)(n.td,{children:"GTE"}),(0,s.jsx)(n.td,{children:"Greater than or equal to"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"34-list-operations",children:"3.4 List Operations"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Opcode"}),(0,s.jsx)(n.th,{children:"Instruction"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"30"}),(0,s.jsx)(n.td,{children:"CONS"}),(0,s.jsx)(n.td,{children:"Construct a pair (cons cell)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"31"}),(0,s.jsx)(n.td,{children:"HEAD (CAR)"}),(0,s.jsx)(n.td,{children:"Extract the head of a list"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"32"}),(0,s.jsx)(n.td,{children:"TAIL (CDR)"}),(0,s.jsx)(n.td,{children:"Extract the tail of a list"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"33"}),(0,s.jsx)(n.td,{children:"LIST size"}),(0,s.jsx)(n.td,{children:"Create a list of n elements from the stack"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"34"}),(0,s.jsx)(n.td,{children:"LEN"}),(0,s.jsx)(n.td,{children:"Return the length of a list"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),": ",(0,s.jsx)(n.code,{children:"LIST 3"})," consumes the 3 values at the top of the stack to create ",(0,s.jsx)(n.code,{children:"[a, b, c]"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"35-symbols-and-evaluation",children:"3.5 Symbols and Evaluation"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Opcode"}),(0,s.jsx)(n.th,{children:"Instruction"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"40"}),(0,s.jsx)(n.td,{children:"MAKE_SYMBOL"}),(0,s.jsx)(n.td,{children:"Creates a symbol"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"41"}),(0,s.jsx)(n.td,{children:"QUOTE"}),(0,s.jsx)(n.td,{children:"Quotes an expression"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"42"}),(0,s.jsx)(n.td,{children:"EVAL"}),(0,s.jsx)(n.td,{children:"Evaluates a quoted expression"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"These instructions support deferred evaluation mechanisms typical of Lisp-like languages."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"36-variable-management",children:"3.6 Variable Management"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Opcode"}),(0,s.jsx)(n.th,{children:"Instruction"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"50"}),(0,s.jsx)(n.td,{children:"LOAD nameIndex"}),(0,s.jsx)(n.td,{children:"Loads the value of a variable"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"51"}),(0,s.jsx)(n.td,{children:"STORE nameIndex"}),(0,s.jsx)(n.td,{children:"Stores a value in a variable"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"52"}),(0,s.jsx)(n.td,{children:"DEFINE nameIndex"}),(0,s.jsx)(n.td,{children:"Defines a new variable"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": Variable identifiers are stored in the constant pool. The index refers to the position in this pool."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"37-control-flow",children:"3.7 Control Flow"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Opcode"}),(0,s.jsx)(n.th,{children:"Instruction"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"60"}),(0,s.jsx)(n.td,{children:"JMP address"}),(0,s.jsx)(n.td,{children:"Unconditional jump to the specified address"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"61"}),(0,s.jsx)(n.td,{children:"JMP_IF_TRUE address"}),(0,s.jsx)(n.td,{children:"Conditional jump if the top value is true"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"62"}),(0,s.jsx)(n.td,{children:"JMP_IF_FALSE address"}),(0,s.jsx)(n.td,{children:"Conditional jump if the top value is false"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"38-function-management",children:"3.8 Function Management"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Opcode"}),(0,s.jsx)(n.th,{children:"Instruction"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"70"}),(0,s.jsx)(n.td,{children:"CALL funcIndex argCount"}),(0,s.jsx)(n.td,{children:"Call function with n arguments"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"71"}),(0,s.jsx)(n.td,{children:"RETURN"}),(0,s.jsx)(n.td,{children:"Return from function"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"72"}),(0,s.jsx)(n.td,{children:"CLOSURE funcIndex"}),(0,s.jsx)(n.td,{children:"Create a closure"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"73"}),(0,s.jsx)(n.td,{children:"LOAD_ARG index"}),(0,s.jsx)(n.td,{children:"Load a function argument"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Function Table"}),": A table associates each function index with its address in the bytecode:"]}),"\n",(0,s.jsx)(n.p,{children:"Function 0 \u2192 address 200\nFunction 1 \u2192 address 350"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"39-inputoutput",children:"3.9 Input/Output"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Opcode"}),(0,s.jsx)(n.th,{children:"Instruction"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"80"}),(0,s.jsx)(n.td,{children:"PRINT"}),(0,s.jsx)(n.td,{children:"Prints the top value"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"81"}),(0,s.jsx)(n.td,{children:"INPUT"}),(0,s.jsx)(n.td,{children:"Reads user input"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"310-termination",children:"3.10 Termination"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Opcode"}),(0,s.jsx)(n.th,{children:"Instruction"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"FF"}),(0,s.jsx)(n.td,{children:"HALT"}),(0,s.jsx)(n.td,{children:"Stops VM execution"})]})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-vm-characteristics",children:"4. VM Characteristics"}),"\n",(0,s.jsx)(n.h3,{id:"41-stack-based-architecture",children:"4.1 Stack-Based Architecture"}),"\n",(0,s.jsx)(n.p,{children:"The stack-based architecture offers several advantages:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Simplicity of design and implementation."}),"\n",(0,s.jsx)(n.li,{children:"Independent and modular instructions."}),"\n",(0,s.jsx)(n.li,{children:"Ease of debugging (stack inspection)."}),"\n",(0,s.jsx)(n.li,{children:"Compatibility with functional paradigms."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"42-multi-paradigm-support",children:"4.2 Multi-Paradigm Support"}),"\n",(0,s.jsx)(n.p,{children:"The CLaD VM is designed to support:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Imperative Programming"}),": variables, sequencing, loops."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Functional Programming"}),": first-class functions, closures."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lisp-inspired Programming"}),": symbols, quote/eval, list manipulation."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"43-type-management",children:"4.3 Type Management"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Automatic Int \u2192 Float conversion in arithmetic operations."}),"\n",(0,s.jsx)(n.li,{children:"Dynamic typing with runtime checking."}),"\n",(0,s.jsx)(n.li,{children:"Support for heterogeneous data structures."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"5-execution-example",children:"5. Execution Example"}),"\n",(0,s.jsx)(n.h3,{id:"51-clad-source-code",children:"5.1 CLaD Source Code"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-clad",children:'list = [1, 2, 3]\nprint(head(list) + 10)\n\n5.2 Assembly Bytecode Representation\nExtrait de code\n\nPUSH_INT 1\nPUSH_INT 2\nPUSH_INT 3\nLIST 3\nSTORE "list"\n\nLOAD "list"\nHEAD\nPUSH_INT 10\nADD\nPRINT\nHALT\n\n5.3 Binary Encoding\nPlaintext\n\n02 00 00 00 01 ; PUSH_INT 1\n02 00 00 00 02 ; PUSH_INT 2\n02 00 00 00 03 ; PUSH_INT 3\n33 03 ; LIST 3\n51 00 ; STORE 0 ("list")\n\n50 00 ; LOAD 0 ("list")\n31 ; HEAD\n02 00 00 00 0A ; PUSH_INT 10\n10 ; ADD\n80 ; PRINT\nFF ; HALT\n\n6. .cbc File Format\n6.1 Structure Overview\n\nTo clearly visualize the .cbc file structure, here is a Mermaid diagram:\nExtrait de code\n\ngraph TD\nA[File .cbc] --\x3e B(HEADER);\nA --\x3e C(CONSTANT POOL);\nA --\x3e D(FUNCTION TABLE);\nA --\x3e E(INSTRUCTIONS);\n\nsubgraph HEADER\nB1(Magic Number : 4 bytes)\nB2(Version : 2 bytes)\nB3(Flags : 1 byte)\nB4(Reserved : 3 bytes)\nend\n\nsubgraph CONSTANT_POOL\nC1(Count : 4 bytes)\nC2[Entry 0] --\x3e C2_1(Type Tag : 1 byte);\nC2_1 --\x3e C2_2(Length : 4 bytes);\nC2_2 --\x3e C2_3(Data : n bytes);\nC3[Entry 1] --\x3e C3_1(Type Tag : 1 byte);\nC3_1 --\x3e C3_2(Length : 4 bytes);\nC3_2 --\x3e C3_3(Data : n bytes);\nend\n\nsubgraph FUNCTION_TABLE\nD1(Count : 4 bytes)\nD2[Function 0] --\x3e D2_1(Index : 4 bytes);\nD2_1 --\x3e D2_2(Address : 4 bytes);\nD2_2 --\x3e D2_3(ArgCount : 1 byte);\nD3[Function 1] --\x3e D3_1(Index : 4 bytes);\nD3_1 --\x3e D3_2(Address : 4 bytes);\nD3_2 --\x3e D3_3(ArgCount : 1 byte);\nend\n\nsubgraph INSTRUCTIONS\nE1(Code Length : 4 bytes)\nE2[Instruction 0] --\x3e E2_1(Opcode : 1 byte);\nE2_1 --\x3e E2_2(Operands : variable);\nE3[Instruction 1] --\x3e E3_1(Opcode : 1 byte);\nE3_1 --\x3e E3_2(Operands : variable);\nend\n\n6.2 Header (10 bytes)\nOffset Size Field Value / Description\n0x00 4 Magic Number 0x43 0x42 0x43 0x00 ("CBC\\0")\n0x04 2 Version 0x01 0x00 (version 1.0)\n0x06 1 Flags 0x00 (reserved for future use)\n0x07 3 Reserved 0x00 0x00 0x00 (padding)\n\nHexadecimal Example:\nPlaintext\n\n43 42 43 00 | 01 00 | 00 | 00 00 00\nMagic | Ver. |Flg | Reserved\n\n6.3 Constant Pool\n\nStructure:\nField Size Description\nCount 4 bytes Total number of entries\nEntry N variable Pool entry\nType Tag 1 byte Entry type (see section 2.1)\nLength 4 bytes Data size\nData Length bytes Raw data\n\nEntry Examples:\n\nString "Hello":\nPlaintext\n\n04 | 00 00 00 05 | 48 65 6C 6C 6F\nType | Length | Data\n\nSymbol \'x\':\nPlaintext\n\n06 | 00 00 00 01 | 78\nType | Length | Data (ASCII \'x\')\n\nInt 42:\nPlaintext\n\n00 | 00 00 00 04 | 00 00 00 2A\nType | Length | Data (32-bit int)\n\n6.4 Function Table\n\nStructure:\nField Size Description\nCount 4 bytes Number of functions\nFunction Entry N variable Table entry\nIndex 4 bytes Function ID\nAddress 4 bytes Address in bytecode\nArgCount 1 byte Number of arguments\n\nExample:\n\nCount: 2 functions\n\nFunction 0: factorial (2 args, @ 0x00C8)\nPlaintext\n\n00 00 00 00 | 00 00 00 C8 | 02\nIndex Address Args\n\nFunction 1: main (0 args, @ 0x0150)\nPlaintext\n\n00 00 00 01 | 00 00 01 50 | 00\nIndex Address Args\n\n6.5 Instructions\n\nStructure:\nField Size Description\nCode Length 4 bytes Total code size\nInstruction N variable Sequence of Opcode and Operands\nOpcode 1 byte Instruction\nOperands variable Instruction arguments\n\nEncoding Example:\n\nInstruction: PUSH_INT 42\nPlaintext\n\n02 | 00 00 00 2A\nOpcode | Operand (4 bytes)\n\nInstruction: ADD\nPlaintext\n\n10\nOpcode (no operand)\n\nInstruction: CALL 0 with 2 args\nPlaintext\n\n70 | 00 00 00 00 | 02\nOpcode | Function Index | ArgCount\n\n6.6 Complete .cbc File Example\n\nProgram: print(42)\nPlaintext\n\n43 42 43 00 01 00 00 00 00 00 ; HEADER (10 bytes)\n00 00 00 00 ; CONSTANT POOL (Count: 0)\n00 00 00 00 ; FUNCTION TABLE (Count: 0)\n00 00 00 06 ; INSTRUCTIONS (Code Length: 6 bytes)\n02 00 00 00 2A ; PUSH_INT 42\n80 ; PRINT\nFF ; HALT\n\nTotal size: 28 bytes\n'})})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453(e,n,t){t.d(n,{R:()=>d,x:()=>l});var i=t(6540);const s={},r=i.createContext(s);function d(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);